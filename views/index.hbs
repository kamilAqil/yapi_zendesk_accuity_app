
    
    
    <p class="pastbar">Today's Appointments</p>
    <p id="apptToday"></p> 
     
    <p class="pastbar">Future Appointments</p>
    <p id="apptFuture"></p>
    
    <p class="pastbar"> Past Appointments</p>
    {{!-- <button type="button" onclick="pappointments()">Past Appt</button> --}}
    <p id="apptPast"></p>

    <script type="text/javascript" src="https://static.zdassets.com/zendesk_app_framework_sdk/2.0/zaf_sdk.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        let res = null;
        let client = ZAFClient.init();

        //{ { !--get ticket requester name-- } }
        client.get('ticket.requester').then(function (data) {
            data = data['ticket.requester'];
            let requesterName = data.name;
            let requesterEmail = data.email;

            //{ { !--send ticket requester name to server api-- } }
            axios.get(`/acuityAPI?requesterName=${requesterName}&requesterEmail=${requesterEmail}`)
                .then(function (response) {
                        console.log(response.data);
                        x = "", y="", z="";
                        //PAST APPOINTMENTS
                        if (response.data.pastAppointments) {
                        for (let i in response.data.pastAppointments) {
                            x += "<p class = 'rowOne' style= 'padding:0; margin:0'>" + response.data.pastAppointments[i].date + "</p>";
                            x += "<div class='box'></div><p class = 'rowTwo'style= ' margin:0'>" + response.data.pastAppointments[i].time  + " " + response.data.pastAppointments[i].name + "</p>";
                            x += "<p class = 'rowThree' style= 'padding:0; margin:0 '>" + response.data.pastAppointments[i].type + " | " + response.data.pastAppointments[i].assignedTo + " | " + "5:00pm " + "to " + "6:00pm "+ "</p>";
                            x += "<p class = 'notes'>" + response.data.pastAppointments[i].notes + "</p>";
                            
                            {{!-- x += "<p style= 'padding:0; margin:0'> Date: " + response.data.pastAppointments[i].date + "</p>";
                            x += "<p style= 'padding:0; margin:0'> Name: " + response.data.pastAppointments[i].name + "</p>";
                            x += "<p style= 'padding:0; margin:0'> ID: " + response.data.pastAppointments[i].id + "</p>";
                            x += "<p> Assigned To: " + response.data.pastAppointments[i].assignedTo + "</p>"; --}}
                        }}
                        if (response.data.futureAppointments) {
                            //FUTURE APPOINTMENTS
                            for (let i in response.data.futureAppointments) {
                            y += "<p style= 'padding:0; margin:0'> ID: " + response.data.futureAppointments[i].id + "</p>";
                            y += "<p style= 'padding:0; margin:0'> Name: " + response.data.futureAppointments[i].name + "</p>";
                            y += "<p style= 'padding:0; margin:0'> Date: " + response.data.futureAppointments[i].date + "</p>";
                            y += "<p> Assigned To: " + response.data.futureAppointments[i].assignedTo + "</p>";
                        }}
                            //TODAY'S APPOINTMENTS
                        if (response.data.todaysAppointments) {
                            for (let i in response.data.todaysAppointments) {
                            z += "<p style= 'padding:0; margin:0'> ID: " + response.data.todaysAppointments[i].id + "</p>";
                            z += "<p style= 'padding:0; margin:0'> Name: " + response.data.todaysAppointments[i].name + "</p>";
                            z += "<p style= 'padding:0; margin:0'> Date: " + response.data.todaysAppointments[i].date + "</p>";
                            z += "<p> Assigned To: " + response.data.todaysAppointments[i].assignedTo + "</p>";
                            }}

                        x.length === 0 ? x = 'No Past Appointments' : null;
                        y.length === 0 ? y = 'No Future Appointments' : null;
                        z.length === 0 ? z = 'No Appointments Today' : null;
                        
                        
                        document.getElementById("apptPast").innerHTML = x;
                        document.getElementById("apptFuture").innerHTML = y;
                        document.getElementById("apptToday").innerHTML = z;



        });


                        // Button disabled var = false
                        // store x y and z somewhere, maybe session storage or state or some equivalent
                        // res = {x: x, y: y, z: z};
                })

                .catch(function (error) {
                    console.log(error);
                });
        
        // function paddsomething() {
        //     document.getElementById('juiceythings').innerhtml = res.x
        //}
    </script>